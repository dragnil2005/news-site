<template>
  <div class="contact-view">
    <div class="container">
      <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
      <div class="contact-header">
        <h1>üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã</h1>
        <p>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å</p>
      </div>

      <div class="contact-content">
        <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="contact-info-section">
          <div class="contact-info-grid">
            <div class="contact-card">
              <div class="contact-icon">üìß</div>
              <h3>Email</h3>
              <p>–û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª —Å–≤—è–∑–∏ –¥–ª—è –æ–±—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤</p>
              <a href="mailto:info@newsportal.ru" class="contact-link">
                info@newsportal.ru
              </a>
              <p class="response-time">–û—Ç–≤–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤</p>
            </div>

            <div class="contact-card">
              <div class="contact-icon">üÜò</div>
              <h3>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</h3>
              <p>–ü–æ–º–æ—â—å —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏ –±–∞–≥–∞–º–∏</p>
              <a href="mailto:support@newsportal.ru" class="contact-link">
                support@newsportal.ru
              </a>
              <p class="response-time">–û—Ç–≤–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 12 —á–∞—Å–æ–≤</p>
            </div>

            <div class="contact-card">
              <div class="contact-icon">üíº</div>
              <h3>–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ</h3>
              <p>–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤—É –∏ —Ä–µ–∫–ª–∞–º–µ</p>
              <a href="mailto:partners@newsportal.ru" class="contact-link">
                partners@newsportal.ru
              </a>
              <p class="response-time">–û—Ç–≤–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 48 —á–∞—Å–æ–≤</p>
            </div>

            <div class="contact-card">
              <div class="contact-icon">üë®‚Äçüíª</div>
              <h3>–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</h3>
              <p>API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –≤–æ–ø—Ä–æ—Å—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏</p>
              <a href="mailto:dev@newsportal.ru" class="contact-link">
                dev@newsportal.ru
              </a>
              <p class="response-time">–û—Ç–≤–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤</p>
            </div>
          </div>
        </div>

        <!-- –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ -->
        <div class="contact-form-section">
          <h2>‚úçÔ∏è –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏</h2>
          <p class="form-description">
            –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –Ω–∏–∂–µ –∏ –º—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–≤–µ—Ç–∏–º –≤–∞–º –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è
          </p>

          <form @submit.prevent="submitForm" class="contact-form">
            <div class="form-row">
              <div class="form-group">
                <label for="name">–í–∞—à–µ –∏–º—è *</label>
                <input
                  id="name"
                  v-model="form.name"
                  type="text"
                  :class="['form-control', { 'is-invalid': errors.name }]"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è"
                  required
                />
                <div v-if="errors.name" class="invalid-feedback">
                  {{ errors.name }}
                </div>
              </div>

              <div class="form-group">
                <label for="email">Email –∞–¥—Ä–µ—Å *</label>
                <input
                  id="email"
                  v-model="form.email"
                  type="email"
                  :class="['form-control', { 'is-invalid': errors.email }]"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email"
                  required
                />
                <div v-if="errors.email" class="invalid-feedback">
                  {{ errors.email }}
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="subject">–¢–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏—è *</label>
              <input
                id="subject"
                v-model="form.subject"
                type="text"
                :class="['form-control', { 'is-invalid': errors.subject }]"
                placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—è"
                required
              />
              <div v-if="errors.subject" class="invalid-feedback">
                {{ errors.subject }}
              </div>
            </div>

            <div class="form-group">
              <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –æ–±—Ä–∞—â–µ–Ω–∏—è *</label>
              <select
                id="category"
                v-model="form.category"
                :class="['form-control', { 'is-invalid': errors.category }]"
                required
              >
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                <option value="technical">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</option>
                <option value="general">–û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã</option>
                <option value="feedback">–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</option>
                <option value="bug">–°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ</option>
                <option value="suggestion">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é</option>
                <option value="partnership">–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ</option>
                <option value="other">–î—Ä—É–≥–æ–µ</option>
              </select>
              <div v-if="errors.category" class="invalid-feedback">
                {{ errors.category }}
              </div>
            </div>

            <div class="form-group">
              <label for="message">–°–æ–æ–±—â–µ–Ω–∏–µ *</label>
              <textarea
                id="message"
                v-model="form.message"
                :class="['form-control', { 'is-invalid': errors.message }]"
                placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ..."
                rows="6"
                required
              ></textarea>
              <div v-if="errors.message" class="invalid-feedback">
                {{ errors.message }}
              </div>
              <div class="char-counter">
                {{ form.message.length }}/1000 —Å–∏–º–≤–æ–ª–æ–≤
              </div>
            </div>

            <div class="form-group">
              <label class="checkbox-label">
                <input
                  v-model="form.consent"
                  type="checkbox"
                  required
                />
                <span>–Ø —Å–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö *</span>
              </label>
              <div v-if="errors.consent" class="invalid-feedback">
                {{ errors.consent }}
              </div>
            </div>

            <div class="form-group">
              <label class="checkbox-label">
                <input
                  v-model="form.copyToEmail"
                  type="checkbox"
                />
                <span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–ø–∏—é —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –º–æ—é –ø–æ—á—Ç—É</span>
              </label>
            </div>

            <div class="form-actions">
              <button 
                type="submit" 
                class="btn btn-primary btn-lg"
                :disabled="isSubmitting"
              >
                <span v-if="isSubmitting" class="spinner"></span>
                <span v-else>üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</span>
              </button>
              <button 
                type="button" 
                @click="resetForm"
                class="btn btn-outline"
              >
                –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É
              </button>
            </div>

            <div v-if="submitSuccess" class="success-message">
              <div class="success-icon">‚úÖ</div>
              <h3>–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!</h3>
              <p>–ú—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –æ—Ç–≤–µ—Ç–∏–º –≤–∞–º –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.</p>
              <p>–ù–æ–º–µ—Ä –≤–∞—à–µ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è: <strong>#{{ ticketNumber }}</strong></p>
            </div>

            <div v-if="submitError" class="error-message">
              <div class="error-icon">‚ùå</div>
              <h3>–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏</h3>
              <p>{{ submitError }}</p>
              <button @click="submitError = ''" class="btn btn-outline">
                –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
              </button>
            </div>
          </form>
        </div>

        <!-- –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã -->
        <div class="faq-section">
          <h2>‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h2>
          <div class="faq-list">
            <div 
              v-for="(faq, index) in faqs" 
              :key="index"
              class="faq-item"
              :class="{ open: openFaq === index }"
            >
              <div class="faq-question" @click="toggleFaq(index)">
                <h3>{{ faq.question }}</h3>
                <span class="faq-toggle">{{ openFaq === index ? '‚àí' : '+' }}</span>
              </div>
              <div class="faq-answer" v-if="openFaq === index">
                <p>{{ faq.answer }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
        <div class="contact-details-section">
          <h2>üìç –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
          <div class="details-grid">
            <div class="detail-card">
              <div class="detail-icon">üè¢</div>
              <div class="detail-content">
                <h3>–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å</h3>
                <p>–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 1, –æ—Ñ–∏—Å 101</p>
                <p>–ò–Ω–¥–µ–∫—Å: 123456</p>
              </div>
            </div>

            <div class="detail-card">
              <div class="detail-icon">üìû</div>
              <div class="detail-content">
                <h3>–¢–µ–ª–µ—Ñ–æ–Ω—ã</h3>
                <p>–û–±—â–∏–π: <a href="tel:+79991234567">+7 (999) 123-45-67</a></p>
                <p>–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞: <a href="tel:+79991234568">+7 (999) 123-45-68</a></p>
              </div>
            </div>

            <div class="detail-card">
              <div class="detail-icon">‚è∞</div>
              <div class="detail-content">
                <h3>–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã</h3>
                <p>–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ - –ü—è—Ç–Ω–∏—Ü–∞: 9:00 - 18:00</p>
                <p>–°—É–±–±–æ—Ç–∞: 10:00 - 16:00</p>
                <p>–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: –≤—ã—Ö–æ–¥–Ω–æ–π</p>
              </div>
            </div>

            <div class="detail-card">
              <div class="detail-icon">üåê</div>
              <div class="detail-content">
                <h3>–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏</h3>
                <div class="social-links">
                  <a href="#" class="social-link" title="Telegram">
                    <span class="social-icon">‚úàÔ∏è</span> Telegram
                  </a>
                  <a href="#" class="social-link" title="VK">
                    <span class="social-icon">üë•</span> VK
                  </a>
                  <a href="#" class="social-link" title="GitHub">
                    <span class="social-icon">üêô</span> GitHub
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- –ö–∞—Ä—Ç–∞ -->
        <div class="map-section">
          <h2>üó∫Ô∏è –ö–∞–∫ –Ω–∞—Å –Ω–∞–π—Ç–∏</h2>
          <div class="map-container">
            <div class="map-placeholder">
              <div class="map-content">
                <div class="map-marker">üìç</div>
                <div class="map-info">
                  <h3>–ú—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è –∑–¥–µ—Å—å</h3>
                  <p>–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 1</p>
                  <p>–ë–ª–∏–∂–∞–π—à–µ–µ –º–µ—Ç—Ä–æ: "–ü—Ä–∏–º–µ—Ä–Ω–∞—è"</p>
                  <button class="btn btn-outline">
                    üìç –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive, computed } from 'vue'

// –°–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–æ—Ä–º—ã
const form = reactive({
  name: '',
  email: '',
  subject: '',
  category: '',
  message: '',
  consent: false,
  copyToEmail: false
})

const errors = reactive({})
const isSubmitting = ref(false)
const submitSuccess = ref(false)
const submitError = ref('')
const openFaq = ref(0)
const ticketNumber = ref(Math.floor(100000 + Math.random() * 900000))

// –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã
const faqs = ref([
  {
    question: '–ö–∞–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç–µ?',
    answer: '–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É —Å–∞–π—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email.'
  },
  {
    question: '–ö–∞–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∞–∫–∫–∞—É–Ω—Ç—É?',
    answer: '–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—Ö–æ–¥–∞ –Ω–∞–∂–º–∏—Ç–µ "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?", –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à email –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ –ø–∏—Å—å–º–µ.'
  },
  {
    question: '–ö–∞–∫ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—å—é?',
    answer: '–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–†–µ–¥–∞–∫—Ç–æ—Ä", –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É —Å—Ç–∞—Ç—å–∏ –∏ –Ω–∞–∂–º–∏—Ç–µ "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å".'
  },
  {
    question: '–ü–æ—á–µ–º—É –º–æ—é —Å—Ç–∞—Ç—å—é –Ω–µ –ø—É–±–ª–∏–∫—É—é—Ç?',
    answer: '–í—Å–µ —Å—Ç–∞—Ç—å–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –º–æ–¥–µ—Ä–∞—Ü–∏—é. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ –≤–∞—à–∞ —Å—Ç–∞—Ç—å—è –ø—Ä–∞–≤–∏–ª–∞–º –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.'
  },
  {
    question: '–ö–∞–∫ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π?',
    answer: '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º—É –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞ info@newsportal.ru.'
  },
  {
    question: '–ï—Å—Ç—å –ª–∏ API –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤?',
    answer: '–î–∞, –¥–æ—Å—Ç—É–ø–Ω–æ REST API. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ "–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤".'
  }
])

// –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
const validateForm = () => {
  let isValid = true
  
  // –°–±—Ä–æ—Å –æ—à–∏–±–æ–∫
  Object.keys(errors).forEach(key => errors[key] = '')
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏
  if (!form.name.trim()) {
    errors.name = '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è'
    isValid = false
  } else if (form.name.length < 2) {
    errors.name = '–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞'
    isValid = false
  }
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è email
  if (!form.email.trim()) {
    errors.email = '–í–≤–µ–¥–∏—Ç–µ email –∞–¥—Ä–µ—Å'
    isValid = false
  } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(form.email)) {
    errors.email = '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email –∞–¥—Ä–µ—Å'
    isValid = false
  }
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–º—ã
  if (!form.subject.trim()) {
    errors.subject = '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—è'
    isValid = false
  } else if (form.subject.length < 5) {
    errors.subject = '–¢–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 5 —Å–∏–º–≤–æ–ª–æ–≤'
    isValid = false
  }
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  if (!form.category) {
    errors.category = '–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –æ–±—Ä–∞—â–µ–Ω–∏—è'
    isValid = false
  }
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
  if (!form.message.trim()) {
    errors.message = '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è'
    isValid = false
  } else if (form.message.length < 10) {
    errors.message = '–°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤'
    isValid = false
  } else if (form.message.length > 1000) {
    errors.message = '–°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 1000 —Å–∏–º–≤–æ–ª–æ–≤'
    isValid = false
  }
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–≥–ª–∞—Å–∏—è
  if (!form.consent) {
    errors.consent = '–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö'
    isValid = false
  }
  
  return isValid
}

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
const submitForm = async () => {
  if (!validateForm()) return
  
  isSubmitting.value = true
  submitError.value = ''
  
  try {
    // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    await new Promise(resolve => setTimeout(resolve, 1500))
    
    // –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
    submitSuccess.value = true
    
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –Ω–æ–º–µ—Ä–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è
    ticketNumber.value = Math.floor(100000 + Math.random() * 900000)
    
    // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
    if (!form.copyToEmail) {
      resetForm()
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    if (window.showToast) {
      window.showToast('success', '–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ', `–í–∞—à–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ #${ticketNumber.value} —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ`)
    }
    
  } catch (error) {
    submitError.value = '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.'
    
    if (window.showToast) {
      window.showToast('error', '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏', '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ')
    }
    
  } finally {
    isSubmitting.value = false
  }
}

// –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
const resetForm = () => {
  Object.assign(form, {
    name: '',
    email: '',
    subject: '',
    category: '',
    message: '',
    consent: false,
    copyToEmail: false
  })
  
  Object.keys(errors).forEach(key => errors[key] = '')
  submitSuccess.value = false
  submitError.value = ''
}

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ FAQ
const toggleFaq = (index) => {
  openFaq.value = openFaq.value === index ? -1 : index
}
</script>

<style scoped>
.contact-view {
  padding: 40px 0;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  min-height: calc(100vh - 200px);
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.contact-header {
  text-align: center;
  margin-bottom: 50px;
  padding: 40px;
  background: white;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

.contact-header h1 {
  color: #333;
  margin-bottom: 15px;
  font-size: 2.8rem;
}

.contact-header p {
  color: #666;
  font-size: 1.2rem;
  max-width: 600px;
  margin: 0 auto;
}

.contact-content {
  display: flex;
  flex-direction: column;
  gap: 50px;
}

/* –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */
.contact-info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 25px;
}

.contact-card {
  background: white;
  border-radius: 15px;
  padding: 30px;
  text-align: center;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  border: 1px solid #e9ecef;
}

.contact-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
  border-color: #007bff;
}

.contact-icon {
  font-size: 3rem;
  margin-bottom: 20px;
}

.contact-card h3 {
  color: #333;
  margin-bottom: 10px;
  font-size: 1.3rem;
}

.contact-card p {
  color: #666;
  margin-bottom: 20px;
  font-size: 0.95rem;
  line-height: 1.5;
}

.contact-link {
  display: block;
  color: #007bff;
  font-weight: 600;
  font-size: 1.1rem;
  margin-bottom: 10px;
  text-decoration: none;
  transition: color 0.2s ease;
}

.contact-link:hover {
  color: #0056b3;
  text-decoration: underline;
}

.response-time {
  color: #28a745;
  font-size: 0.9rem;
  font-weight: 500;
}

/* –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ */
.contact-form-section {
  background: white;
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

.contact-form-section h2 {
  color: #333;
  margin-bottom: 10px;
  font-size: 2rem;
}

.form-description {
  color: #666;
  margin-bottom: 30px;
  font-size: 1.1rem;
}

.contact-form {
  display: flex;
  flex-direction: column;
  gap: 25px;
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 25px;
}

@media (max-width: 768px) {
  .form-row {
    grid-template-columns: 1fr;
  }
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form-group label {
  font-weight: 500;
  color: #555;
  font-size: 14px;
}

.form-control {
  padding: 12px 16px;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-size: 15px;
  transition: all 0.2s ease;
}

.form-control:focus {
  outline: none;
  border-color: #007bff;
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
}

.is-invalid {
  border-color: #dc3545;
}

.is-invalid:focus {
  border-color: #dc3545;
  box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1);
}

.invalid-feedback {
  color: #dc3545;
  font-size: 13px;
  margin-top: 5px;
}

.char-counter {
  text-align: right;
  color: #666;
  font-size: 13px;
  margin-top: 5px;
}

.checkbox-label {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
  font-size: 14px;
}

.checkbox-label input[type="checkbox"] {
  width: 18px;
  height: 18px;
}

.form-actions {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
}

.btn {
  padding: 14px 28px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.btn-lg {
  padding: 16px 32px;
  font-size: 17px;
}

.btn-primary {
  background: #007bff;
  color: white;
}

.btn-primary:hover:not(:disabled) {
  background: #0056b3;
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0, 123, 255, 0.3);
}

.btn-primary:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.btn-outline {
  background: white;
  color: #007bff;
  border-color: #007bff;
}

.btn-outline:hover {
  background: #007bff;
  color: white;
}

.spinner {
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-top: 2px solid white;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.success-message {
  background: #d4edda;
  border: 1px solid #c3e6cb;
  border-radius: 10px;
  padding: 25px;
  margin-top: 20px;
  text-align: center;
}

.success-icon {
  font-size: 3rem;
  margin-bottom: 15px;
}

.success-message h3 {
  color: #155724;
  margin-bottom: 10px;
}

.success-message p {
  color: #155724;
  margin-bottom: 10px;
}

.error-message {
  background: #f8d7da;
  border: 1px solid #f5c6cb;
  border-radius: 10px;
  padding: 25px;
  margin-top: 20px;
  text-align: center;
}

.error-icon {
  font-size: 3rem;
  margin-bottom: 15px;
}

.error-message h3 {
  color: #721c24;
  margin-bottom: 10px;
}

.error-message p {
  color: #721c24;
  margin-bottom: 15px;
}

/* FAQ —Å–µ–∫—Ü–∏—è */
.faq-section {
  background: white;
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

.faq-section h2 {
  color: #333;
  margin-bottom: 30px;
  font-size: 2rem;
}

.faq-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.faq-item {
  border: 1px solid #e9ecef;
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.3s ease;
}

.faq-item.open {
  border-color: #007bff;
  box-shadow: 0 5px 20px rgba(0, 123, 255, 0.1);
}

.faq-question {
  padding: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  background: #f8f9fa;
  transition: background 0.3s ease;
}

.faq-item.open .faq-question {
  background: #e3f2fd;
}

.faq-question h3 {
  margin: 0;
  color: #333;
  font-size: 1.1rem;
  font-weight: 500;
}

.faq-toggle {
  font-size: 1.5rem;
  color: #666;
  font-weight: 300;
  transition: transform 0.3s ease;
}

.faq-item.open .faq-toggle {
  color: #007bff;
  transform: rotate(180deg);
}

.faq-answer {
  padding: 0 20px 20px;
  animation: slideDown 0.3s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.faq-answer p {
  color: #666;
  line-height: 1.6;
  margin: 0;
}

/* –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ */
.contact-details-section {
  background: white;
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

.contact-details-section h2 {
  color: #333;
  margin-bottom: 30px;
  font-size: 2rem;
}

.details-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 25px;
}

.detail-card {
  display: flex;
  align-items: flex-start;
  gap: 20px;
  padding: 25px;
  background: #f8f9fa;
  border-radius: 15px;
  border: 1px solid #e9ecef;
  transition: all 0.3s ease;
}

.detail-card:hover {
  border-color: #007bff;
  background: #e3f2fd;
  transform: translateY(-5px);
}

.detail-icon {
  font-size: 2.5rem;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
  border-radius: 12px;
  border: 1px solid #e9ecef;
  flex-shrink: 0;
}

.detail-content h3 {
  color: #333;
  margin-bottom: 10px;
  font-size: 1.2rem;
}

.detail-content p {
  color: #666;
  margin-bottom: 8px;
  font-size: 0.95rem;
}

.detail-content a {
  color: #007bff;
  text-decoration: none;
}

.detail-content a:hover {
  text-decoration: underline;
}

.social-links {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.social-link {
  display: flex;
  align-items: center;
  gap: 10px;
  color: #007bff;
  text-decoration: none;
  padding: 8px 12px;
  border-radius: 8px;
  transition: all 0.2s ease;
  border: 1px solid transparent;
}

.social-link:hover {
  background: white;
  border-color: #e9ecef;
  color: #0056b3;
}

.social-icon {
  font-size: 1.2rem;
}

/* –ö–∞—Ä—Ç–∞ */
.map-section {
  background: white;
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

.map-section h2 {
  color: #333;
  margin-bottom: 30px;
  font-size: 2rem;
}

.map-container {
  border-radius: 15px;
  overflow: hidden;
  border: 1px solid #e9ecef;
}

.map-placeholder {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  height: 300px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.map-content {
  text-align: center;
  color: white;
  padding: 30px;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-radius: 15px;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.map-marker {
  font-size: 3rem;
  margin-bottom: 15px;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.map-info h3 {
  color: white;
  margin-bottom: 10px;
  font-size: 1.5rem;
}

.map-info p {
  color: rgba(255, 255, 255, 0.9);
  margin-bottom: 15px;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
  .contact-header {
    padding: 30px 20px;
  }
  
  .contact-header h1 {
    font-size: 2.2rem;
  }
  
  .contact-form-section,
  .faq-section,
  .contact-details-section,
  .map-section {
    padding: 30px 20px;
  }
  
  .contact-info-grid,
  .details-grid {
    grid-template-columns: 1fr;
  }
  
  .form-actions {
    flex-direction: column;
  }
  
  .btn {
    width: 100%;
  }
}

@media (max-width: 576px) {
  .contact-view {
    padding: 20px 0;
  }
  
  .contact-header h1 {
    font-size: 1.8rem;
  }
  
  .contact-header p {
    font-size: 1rem;
  }
  
  .contact-card,
  .detail-card {
    padding: 20px;
  }
}
</style>